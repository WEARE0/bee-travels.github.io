<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Openshift | Bee Travels</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Openshift | Bee Travels"><meta data-react-helmet="true" name="description" content="Bee Travels is able to be deployed to RedHat&#x27;s OpenShift container platform. Learn more about OpenShift and how Bee Travels interacts with it below:"><meta data-react-helmet="true" property="og:description" content="Bee Travels is able to be deployed to RedHat&#x27;s OpenShift container platform. Learn more about OpenShift and how Bee Travels interacts with it below:"><meta data-react-helmet="true" property="og:url" content="https://bee-travels.github.io/docs/openshift"><link data-react-helmet="true" rel="shortcut icon" href="/img/faviconBee.ico"><link data-react-helmet="true" rel="canonical" href="https://bee-travels.github.io/docs/openshift"><link rel="stylesheet" href="/styles.e4f86489.css">
<link rel="preload" href="/styles.b8ff35c3.js" as="script">
<link rel="preload" href="/runtime~main.ecca9717.js" as="script">
<link rel="preload" href="/main.0069eaad.js" as="script">
<link rel="preload" href="/1.e9b79b8d.js" as="script">
<link rel="preload" href="/2.c605e86f.js" as="script">
<link rel="preload" href="/23.fa99f49f.js" as="script">
<link rel="preload" href="/24.ce4b8b15.js" as="script">
<link rel="preload" href="/935f2afb.60f6c2a3.js" as="script">
<link rel="preload" href="/17896441.dfc2d206.js" as="script">
<link rel="preload" href="/297d0eda.cd1c2c2b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Bee-Travels"><strong class="navbar__title">Bee Travels</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/workshop">Workshop</a></div><div class="navbar__items navbar__items--right"><a href="https://developer.ibm.com/?s=microservices" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">IBM Developer</a><a href="https://github.com/bee-travels" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Bee-Travels"><strong class="navbar__title">Bee Travels</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/workshop">Workshop</a></li><li class="menu__list-item"><a href="https://developer.ibm.com/?s=microservices" target="_blank" rel="noopener noreferrer" class="menu__link">IBM Developer</a></li><li class="menu__list-item"><a href="https://github.com/bee-travels" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Microservices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about">About Microservices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/designing">Designing Microservices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Runtime</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/node">Node.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/python">Python</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/kube">Kubernetes</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/openshift">Openshift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/istioabout">Istio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/knativeabout">Knative</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Life Cycle</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tdd">Test Driven Development</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/techtalks">Tech Talks</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Openshift</h1></header><div class="markdown"><p>Bee Travels is able to be deployed to RedHat&#x27;s OpenShift container platform. Learn more about OpenShift and how Bee Travels interacts with it below:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ibm-cloud"></a>IBM Cloud<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ibm-cloud" title="Direct link to heading">#</a></h2><p>IBM Cloud allows users to provision an OpenShift cluster <a href="https://cloud.ibm.com/kubernetes/catalog/create?platformType=openshift" target="_blank" rel="noopener noreferrer">here</a>. The provisioning process takes about 20-30 minutes.</p><p>Deploying Bee Travels to OpenShift on IBM Cloud can be done by using the Bee Travels Wizard or cloning the <a href="https://github.com/bee-travels/config" target="_blank" rel="noopener noreferrer">config</a> repo.</p><p>To deploy v1, run this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy-openshift-v1.sh</span></div></div></div></div></div><p>To deploy v2, run this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy-openshift-v2.sh</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="linuxone-community-cloud"></a>LinuxONE Community Cloud<a aria-hidden="true" tabindex="-1" class="hash-link" href="#linuxone-community-cloud" title="Direct link to heading">#</a></h2><p>The OpenShift Container Platform is available on the LinuxONE Community Cloud built on IBM&#x27;s Z Mainframe. Currently, <a href="https://linuxone.cloud.marist.edu/#/register?flag=OCP" target="_blank" rel="noopener noreferrer">creating a cluster</a> is only available as a trial.</p><p>Because this is built on a Z Mainframe, the Docker images used for containers have to be built using <code>s390x</code> architecture and not <code>x86</code>. Let&#x27;s take a look at how we modify this in Bee Travels for the Node.js version. Bee Travels Node.js service Docker images are built using the <code>node:12.11.0-alpine</code> base image. Below is the first line of the Dockerfile:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM node:12.11.0-alpine</span></div></div></div></div></div><p>By default, this pulls the <code>x86</code> version of the base image. To modify this to be built with the <code>s390x</code> architecture for the base image, the specifc <code>sha256</code> must be specified. For thie specific base image, this can be found <a href="https://hub.docker.com/layers/node/library/node/12.11.0-alpine/images/sha256-89012ced616beb0b677659c62bd9e9ffc979a6372ff0f9cb562b23d785fbac82?context=explore" target="_blank" rel="noopener noreferrer">here</a>. Below is what that same line in the Dockerfile looks like to work with the new architecture:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM node:12.11.0-alpine@sha256:89012ced616beb0b677659c62bd9e9ffc979a6372ff0f9cb562b23d785fbac82</span></div></div></div></div></div><p>Deploying Bee Travels to OpenShift on the LinuxONE Community Cloud can be done by using the Bee Travels Wizard or cloning the <a href="https://github.com/bee-travels/config" target="_blank" rel="noopener noreferrer">config</a> repo.</p><p>To deploy v1, run this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy-openshift-v1-z.sh</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dashboard"></a>Dashboard<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dashboard" title="Direct link to heading">#</a></h2><p><img alt="img" src="/assets/images/openshift-dashboard-da5cb0da19dfe5fb8291bf0212553c04.png"></p><p>The OpenShift dashboard provides a nice alternative to the <a href="https://docs.openshift.com/container-platform/4.3/cli_reference/openshift_cli/getting-started-cli.html" target="_blank" rel="noopener noreferrer">oc cli</a> with a GUI to view and manage your cluster.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="operators"></a>Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#operators" title="Direct link to heading">#</a></h2><p>Depending on where your OpenShift cluster is provisioned, your cluster may come with operators that you can install into your cluster. Operators can be installed from <a href="https://operatorhub.io/" target="_blank" rel="noopener noreferrer">OperatorHub</a> and the <a href="https://marketplace.redhat.com/en-us" target="_blank" rel="noopener noreferrer">Red Hat Marketplace</a>. </p><p>Bee Travels takes advantage of operators in OpenShift. One operator that Bee Travels works with is the <a href="https://operatorhub.io/operator/postgresql-operator-dev4devs-com" target="_blank" rel="noopener noreferrer">PostgreSQL database operator</a>. This operator can be installed either manually through the UI by following <a href="https://developer.ibm.com/tutorials/operator-hub-openshift-4-operators-ibm-cloud/" target="_blank" rel="noopener noreferrer">these</a> steps or automatically in the <code>deploy-openshift-v2.sh</code> script by specifying the database type as seen below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy-openshift-v2.sh -d postgres</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="accessing-services-externally"></a>Accessing Services Externally<a aria-hidden="true" tabindex="-1" class="hash-link" href="#accessing-services-externally" title="Direct link to heading">#</a></h2><p>When deploying an application to an OpenShift cluster, there is no way to access any of the services from outside the cluster without exposing a service. In the case of Bee Travels, we are concerned with accessing the UI service this is the only service a user would interact with. In order to expose the UI, a Route needs to be defined. </p><p>A Route can be created via the OpenShift dashboard as seen below:</p><p><img alt="img" src="/assets/images/openshift-route-ae42cb84e4dcda6e30de18bdfcdff1b0.png"></p><p>Or a Route can be created by defining an OpenShift Route <a href="https://github.com/bee-travels/config/blob/master/openshift/ui-route.yaml" target="_blank" rel="noopener noreferrer">yaml file</a> to your cluster via the cli and running the following command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">oc apply -f openshift/ui-route.yaml</span></div></div></div></div></div><p>This Route file can also be deployed using the <code>deploy-openshift.sh</code> scripts if the OpenShift Cluster is on IBM Cloud. To do this, the cluster name must be specified as seen below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy-openshift-v1.sh -c &lt;CLUSTER_NAME&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging"></a>Debugging<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging" title="Direct link to heading">#</a></h2><p>As part of the application development life cycle, there will come a time when debugging will be needed to figure out why something is not working as intended in your cluster. Through the OpenShift dashboard, you can view activity of running services in your Project details. If you know which service is not functioning properly, you can view the logs and events for that specific service&#x27;s pod as seen below:</p><p><img alt="img" src="/assets/images/openshift-pod-2e02bcd3a371f6e85de39bd614192436.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="external-content"></a>External Content<a aria-hidden="true" tabindex="-1" class="hash-link" href="#external-content" title="Direct link to heading">#</a></h2><ul><li><a href="https://video.ibm.com/recorded/127936835" target="_blank" rel="noopener noreferrer">Using Openshift on Different Clouds</a></li><li><a href="https://developer.ibm.com/patterns/deploy-to-openshift-4-redhat-universal-base-image" target="_blank" rel="noopener noreferrer">Deploy Red Hat UBI to OpenShift</a></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/kube"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Kubernetes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/istioabout"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Istio Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ibm-cloud" class="table-of-contents__link">IBM Cloud</a></li><li><a href="#linuxone-community-cloud" class="table-of-contents__link">LinuxONE Community Cloud</a></li><li><a href="#dashboard" class="table-of-contents__link">Dashboard</a></li><li><a href="#operators" class="table-of-contents__link">Operators</a></li><li><a href="#accessing-services-externally" class="table-of-contents__link">Accessing Services Externally</a></li><li><a href="#debugging" class="table-of-contents__link">Debugging</a></li><li><a href="#external-content" class="table-of-contents__link">External Content</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://developer.ibm.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Developer</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://www.crowdcast.io/ibmdeveloper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Crowdcast</a></li></ul></div></div><div class="text--center"><div></div></div></div></footer></div>
<script src="/styles.b8ff35c3.js"></script>
<script src="/runtime~main.ecca9717.js"></script>
<script src="/main.0069eaad.js"></script>
<script src="/1.e9b79b8d.js"></script>
<script src="/2.c605e86f.js"></script>
<script src="/23.fa99f49f.js"></script>
<script src="/24.ce4b8b15.js"></script>
<script src="/935f2afb.60f6c2a3.js"></script>
<script src="/17896441.dfc2d206.js"></script>
<script src="/297d0eda.cd1c2c2b.js"></script>
</body>
</html>